{% extends "layout.html" %}

{% block script %}
    <script src="https://code.jquery.com/jquery-3.6.0.slim.js" integrity="sha256-HwWONEZrpuoh951cQD1ov2HUK5zA5DwJ1DNUXaM6FsY=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}

{% block title %}
    Edit Alias
{% endblock %}

{% block body %}
    <h1 class="text-white p-5"> Edit Friend's Nickname </h1>
    <section class="px-5 text-start text-white">
        <div class="form-group text-start">
            <form action="/friends/edit-alias" method="post" id="editnickname">

                <!-- Input name -->
                <div class="form-group text-start">
                    <label class="text-white" for="nickname"> Nickname (max. 50 characters) </label>
                    <input type="hidden" value="{{ id }}" name="id" />
                    <input autocomplete="off" autofocus class="form-control add_event_form" value="{{ initial_nick }}" id="nickname" name="alias" type="text" placeholder="{{ real_username }}"/>
                </div>

                <div class="text-center mb-5">
                    <button class="btn btn-secondary" type="submit" name="action" value="cancel"> Cancel </button> &nbsp;

                <!-- Edit Button -->
                <button type="button" class="btn btn-success" data-toggle="modal" data-target="#Modal">
                    Edit Nickname
                </button>
            </form>
        </div>
    </section>

    <!-- Modal -->
    <div class="modal fade text-dark" id="Modal" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ModalLabel">Edit Nickname</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Are you sure you want to change your friend's nickname? <br>
                    (It will only appear on your device)
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="save">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        $('#save').click(function(){
            $('<input />').attr('type', 'hidden')
                        .attr('name', 'action')
                        .attr('value', 'edit')
                        .appendTo('#editnickname');
            $("#editnickname").submit();
        });
    </script>

{% endblock %}